diff -cr emacs.clean2/emacs-30.2/configure.ac emacs.clean/emacs-30.2/configure.ac
*** emacs.clean2/emacs-30.2/configure.ac Thu Aug 14 03:46:38 2025
--- emacs.build/emacs-30.2/configure.ac Sat Dec 27 09:09:31 2025
***************
*** 1536,1541 ****
--- 1536,1552 ----
      esac
    ;;
  
+   aarch64-*-* )
+     case "${canonical}" in
+       *-mingw* )
+ 		opsys=mingw32
+ 		# MinGW overrides and adds some system headers in nt/inc.
+ 		GCC_TEST_OPTIONS="-I $srcdir/nt/inc -Wno-error=implicit-function-declaration"
+ 		;;
+       ## Otherwise, we'll fall through to the generic opsys code at the bottom.
+     esac
+   ;;
+ 
    * )
      unported=yes
    ;;
***************
*** 2345,2350 ****
--- 2356,2362 ----
  if test "$opsys" = "mingw32"; then
    case "$canonical" in
      x86_64-*-mingw*) C_SWITCH_SYSTEM="-mtune=generic" ;;
+     aarch64-*-mingw*) C_SWITCH_SYSTEM="-mtune=generic" ;;
      *) C_SWITCH_SYSTEM="-mtune=pentium4" ;;
    esac
  fi
***************
*** 2439,2445 ****
       [LIBS="-lm $LIBS"
        AC_LINK_IFELSE([],
          [emacs_cv_lib_math=-lm],
! 	[AC_MSG_ERROR([Math library (-lm) not found])])])
     LIBS=$OLD_LIBS])
  case $emacs_cv_lib_math in
    -*) LIB_MATH=$emacs_cv_lib_math;;
--- 2451,2457 ----
       [LIBS="-lm $LIBS"
        AC_LINK_IFELSE([],
          [emacs_cv_lib_math=-lm],
! 	[AC_MSG_WARN([Math library (-lm) not found])])])
     LIBS=$OLD_LIBS])
  case $emacs_cv_lib_math in
    -*) LIB_MATH=$emacs_cv_lib_math;;
***************
*** 7504,7509 ****
--- 7516,7522 ----
     ## values of DEFAULT_IMAGE_BASE in w32fns.c should be kept in sync.
     case "$canonical" in
       x86_64-*-*) LD_SWITCH_SYSTEM_TEMACS="-Wl,-stack,0x00800000 -Wl,-heap,0x00100000 -Wl,-image-base,0x400000000 -Wl,-entry,__start -Wl,-Map,./temacs.map" ;;
+      aarch64-*-*) LD_SWITCH_SYSTEM_TEMACS="-Wl,-stack,0x00800000 -Wl,-heap,0x00100000 -Wl,-image-base,0x1400000000 -Wl,-entry,__start -Wl,-Map,./temacs.map" ;;
       *) LD_SWITCH_SYSTEM_TEMACS="-Wl,-stack,0x00800000 -Wl,-heap,0x00100000 -Wl,-image-base,0x01000000 -Wl,-entry,__start -Wl,-Map,./temacs.map" ;;
     esac
     ## If they want unexec, disable Windows ASLR for the Emacs binary
diff -cr emacs.clean2/emacs-30.2/m4/extensions.m4 emacs.clean/emacs-30.2/m4/extensions.m4
*** emacs.clean2/emacs-30.2/m4/extensions.m4 Sat Jan  4 06:05:30 2025
--- emacs.build/emacs-30.2/m4/extensions.m4 Sat Dec 27 09:23:04 2025
***************
*** 147,153 ****
  
    AC_REQUIRE([AC_CHECK_INCLUDES_DEFAULT])dnl
    _AC_CHECK_HEADER_ONCE([wchar.h])
-   _AC_CHECK_HEADER_ONCE([minix/config.h])
  
  dnl Defining __EXTENSIONS__ may break the system headers on some systems.
  dnl (FIXME: Which ones?)
--- 147,152 ----
*** emacs.clean2/emacs-30.2/./nt/inc/ms-w32.h Sat Jan  4 06:05:30 2025
--- emacs.build/nt/inc/ms-w32.h Fri Dec 26 20:21:10 2025
***************
*** 222,228 ****
     handler, see https://sourceforge.net/p/mingw-w64/mailman/message/32421953/.
     This seems to be an unsolved problem in the MinGW64 runtime.  So we
     use the GCC intrinsics instead.  FIXME.  */
! #define sigsetjmp(j,m) __builtin_setjmp(j)
  #else
  #define sigsetjmp(j,m) setjmp(j)
  #endif
--- 222,229 ----
     handler, see https://sourceforge.net/p/mingw-w64/mailman/message/32421953/.
     This seems to be an unsolved problem in the MinGW64 runtime.  So we
     use the GCC intrinsics instead.  FIXME.  */
! //#define sigsetjmp(j,m) __builtin_setjmp(j)
! #define sigsetjmp(j,m) setjmp(j)
  #else
  #define sigsetjmp(j,m) setjmp(j)
  #endif
***************
*** 330,336 ****
  #define _longjmp  longjmp
  /* MinGW64 defines lseek to invoke lseek64.  */
  #ifndef lseek
! #define lseek     _lseek
  #endif
  #define popen     _popen
  #define pclose    _pclose
--- 331,337 ----
  #define _longjmp  longjmp
  /* MinGW64 defines lseek to invoke lseek64.  */
  #ifndef lseek
! //#define lseek     _lseek
  #endif
  #define popen     _popen
  #define pclose    _pclose
*** emacs.clean2/emacs-30.2/src/w32fns.c Sat Jan  4 06:05:30 2025
--- emacs.build/src/w32fns.c Fri Dec 26 20:25:04 2025
***************
*** 11253,11259 ****
       too nested calls to mark_object.  No way to survive.  */
    if (gc_in_progress)
      terminate_due_to_signal (SIGSEGV, 40);
! #ifdef _WIN64
    /* See ms-w32.h: MinGW64's longjmp crashes if invoked in this context.  */
    __builtin_longjmp (return_to_command_loop, 1);
  #else
--- 11253,11259 ----
       too nested calls to mark_object.  No way to survive.  */
    if (gc_in_progress)
      terminate_due_to_signal (SIGSEGV, 40);
! #if defined(_WIN64) && 0
    /* See ms-w32.h: MinGW64's longjmp crashes if invoked in this context.  */
    __builtin_longjmp (return_to_command_loop, 1);
  #else
***************
*** 11282,11288 ****
      {
        /* Call stack_overflow_handler ().  */
  #ifdef _WIN64
!       exception_data->ContextRecord->Rip = (DWORD_PTR) &stack_overflow_handler;
  #else
        exception_data->ContextRecord->Eip = (DWORD_PTR) &stack_overflow_handler;
  #endif
--- 11282,11289 ----
      {
        /* Call stack_overflow_handler ().  */
  #ifdef _WIN64
! /* Hacked to work on ARM64 */
!       exception_data->ContextRecord->Pc = (DWORD_PTR) &stack_overflow_handler;
  #else
        exception_data->ContextRecord->Eip = (DWORD_PTR) &stack_overflow_handler;
  #endif
*** emacs.clean2/emacs-30.2/src/gnutls.c Sat Jan  4 06:05:30 2025
--- emacs.build/src/gnutls.c Fri Dec 26 20:29:45 2025
***************
*** 649,655 ****
--- 649,659 ----
        maybe_quit ();
        if (non_blocking && ret != GNUTLS_E_INTERRUPTED)
  	break;
+ #if 0
        nanosleep (&delay, NULL);
+ #else
+       Sleep(10);
+ #endif
      }
